import React, { useState, useEffect, useRef } from 'react';
import { ChevronRight, Lock, Globe, Fingerprint, Zap, Trophy, Shield, CheckCircle } from 'lucide-react';

// --- Particle Background Component ---
const ParticleBackground: React.FC = () => {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    let particles: { x: number; y: number; dx: number; dy: number; size: number; alpha: number }[] = [];
    let animationFrameId: number;

    const resizeCanvas = () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      initParticles();
    };

    const initParticles = () => {
      particles = [];
      // Adjust density based on screen size (fewer particles on smaller screens)
      const particleCount = Math.floor((window.innerWidth * window.innerHeight) / 15000); 
      
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          // Very slow drift velocity
          dx: (Math.random() - 0.5) * 0.15,
          dy: (Math.random() - 0.5) * 0.15,
          size: Math.random() * 1.5 + 0.5, // Small size: 0.5px to 2px
          alpha: Math.random() * 0.2 + 0.05 // Low opacity: 0.05 to 0.25
        });
      }
    };

    const draw = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        // Gold color with variable alpha
        ctx.fillStyle = `rgba(197, 160, 89, ${p.alpha})`; 
        ctx.fill();

        // Update position
        p.x += p.dx;
        p.y += p.dy;

        // Wrap around screen edges for continuous flow
        if (p.x < 0) p.x = canvas.width;
        if (p.x > canvas.width) p.x = 0;
        if (p.y < 0) p.y = canvas.height;
        if (p.y > canvas.height) p.y = 0;
      });

      animationFrameId = requestAnimationFrame(draw);
    };

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    draw();

    return () => {
      window.removeEventListener('resize', resizeCanvas);
      cancelAnimationFrame(animationFrameId);
    };
  }, []);

  return <canvas ref={canvasRef} className="absolute inset-0 w-full h-full pointer-events-none opacity-60" />;
};

// --- Fade In Animation Component ---
const FadeInSection: React.FC<{ children: React.ReactNode; delay?: number; className?: string }> = ({ children, delay = 0, className = "" }) => {
  const [isVisible, setVisible] = useState(false);
  const domRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setVisible(true);
          if (domRef.current) observer.unobserve(domRef.current);
        }
      });
    }, { threshold: 0.15 });

    const currentElement = domRef.current;
    if (currentElement) {
      observer.observe(currentElement);
    }

    return () => {
      if (currentElement) {
        observer.unobserve(currentElement);
      }
    };
  }, []);

  return (
    <div
      ref={domRef}
      className={`h-full transition-all duration-1000 ease-[cubic-bezier(0.22,1,0.36,1)] transform will-change-transform ${
        isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8'
      } ${className}`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

// --- Feature Tile Component ---
interface FeatureTileProps {
  id: string;
  icon: React.ReactNode;
  title: string;
  description: React.ReactNode;
  delay: number;
}

const FeatureTile: React.FC<FeatureTileProps> = ({ id, icon, title, description, delay }) => {
  return (
    <FadeInSection delay={delay}>
      <div 
        id={id}
        className="relative group h-full p-8 border border-white/5 hover:border-[#C5A059]/30 bg-white/[0.02] hover:bg-white/[0.04] transition-all duration-500 flex flex-col items-start min-h-[240px]"
      >
        <div className="mb-6 p-3 rounded-full bg-white/5 text-[#C5A059]">
          {icon}
        </div>
        <h3 className="text-xl font-serif text-white mb-3">{title}</h3>
        <div className="text-sm text-neutral-400 font-light leading-relaxed mb-auto">
          {description}
        </div>
      </div>
    </FadeInSection>
  );
};

// --- Vision Card Component ---
const VisionCard: React.FC<{ icon: React.ReactNode; title: string; text: string; delay: number }> = ({ icon, title, text, delay }) => (
  <FadeInSection delay={delay}>
    <div className="h-full bg-white/5 rounded-2xl p-8 border border-white/5 hover:border-[#C5A059]/20 transition-all duration-500">
      <div className="text-[#C5A059] mb-4">{icon}</div>
      <h3 className="text-white font-bold tracking-wide uppercase text-sm mb-3">{title}</h3>
      <p className="text-neutral-400 text-sm leading-relaxed">{text}</p>
    </div>
  </FadeInSection>
);

const App: React.FC = () => {
  const [email, setEmail] = useState('');
  const [submitted, setSubmitted] = useState(false);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (email) {
      setSubmitted(true);
      // Simulate API call
      setTimeout(() => setSubmitted(false), 3000);
    }
  };

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  return (
    <div className="min-h-screen bg-[#050505] text-[#e5e5e5] flex flex-col items-center overflow-x-hidden selection:bg-[#C5A059] selection:text-black">
      
      {/* Decorative Background Elements */}
      <div className="fixed inset-0 pointer-events-none z-0">
        <div className="absolute top-[-20%] left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-[radial-gradient(circle,rgba(197,160,89,0.15)_0%,transparent_70%)] blur-3xl opacity-20"></div>
        {/* Particle System */}
        <ParticleBackground />
      </div>

      <main className="relative z-10 w-full max-w-5xl px-6 py-12 md:py-20 flex flex-col items-center">
        
        {/* LOGO SECTION */}
        <div className="mb-12 relative group cursor-default">
          <div className="absolute inset-0 bg-[#C5A059] rounded-full blur-2xl opacity-10 group-hover:opacity-20 transition-opacity duration-1000 animate-pulse"></div>
          {/* Using a placeholder for the requested logo.png since I cannot upload files. 
              In a real scenario, <img src="logo.png" /> would go here. 
              I am creating a CSS fallback that looks premium. */}
          <div className="w-24 h-24 md:w-32 md:h-32 relative flex items-center justify-center">
             <img 
               src="logo.png" 
               alt="REMEMBERED Logo" 
               className="w-full h-full object-contain drop-shadow-[0_0_10px_rgba(197,160,89,0.3)]"
               onError={(e) => {
                 // Fallback if image fails (for the generated preview)
                 e.currentTarget.style.display = 'none';
                 const parent = e.currentTarget.parentElement;
                 if (parent) {
                    const fallback = document.createElement('div');
                    fallback.className = "w-full h-full border border-[#C5A059]/30 flex items-center justify-center rounded-sm bg-black/50 backdrop-blur-sm";
                    fallback.innerHTML = '<span class="text-4xl font-serif text-[#C5A059]">R</span>';
                    parent.appendChild(fallback);
                 }
               }}
             />
          </div>
        </div>

        {/* BADGE */}
        <div className="mb-10 animate-fade-in-up">
          <div className="px-4 py-1.5 rounded-full border border-[#C5A059]/30 bg-[#C5A059]/5 backdrop-blur-md">
            <span className="text-[10px] md:text-xs font-semibold tracking-[0.2em] text-[#C5A059] uppercase">
              The World’s First AI-Powered Digital Legacy Vault
            </span>
          </div>
        </div>

        {/* HERO HEADLINE */}
        <div className="text-center mb-10 space-y-2">
          <h1 className="font-serif text-5xl md:text-7xl lg:text-9xl font-medium tracking-tight leading-[0.9] text-transparent bg-clip-text bg-gradient-to-b from-[#f0e6d2] to-[#C5A059] drop-shadow-2xl">
            LEGENDS<br />
            <span className="text-[#C5A059]">NEVER DIE.</span>
          </h1>
        </div>

        {/* SUBLINE */}
        <div className="text-center max-w-2xl mb-16 opacity-90">
          <p className="text-lg md:text-xl font-light text-neutral-400 leading-relaxed">
            Preserve what defines you.<br />
            <span className="text-white">Memories, voice, and meaning</span> — structured for eternity.
          </p>
        </div>

        {/* CTA SECTION */}
        <div className="w-full max-w-md mb-8 flex flex-col items-center gap-4">
            {!submitted ? (
              <form onSubmit={handleSubmit} className="w-full flex flex-col gap-4">
                <input
                  type="email"
                  placeholder="ENTER YOUR EMAIL"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  className="w-full bg-white/5 border border-[#C5A059]/30 text-center text-[#e5e5e5] py-3 px-4 focus:outline-none focus:border-[#C5A059] transition-colors placeholder:text-neutral-600 text-sm tracking-widest font-light"
                  required
                />
                <button 
                  type="submit"
                  className="group relative w-full px-8 py-4 bg-transparent border border-[#C5A059] text-[#C5A059] font-medium tracking-widest uppercase text-sm hover:bg-[#C5A059] hover:text-black transition-all duration-500 ease-out overflow-hidden"
                >
                  <span className="relative z-10 flex items-center justify-center gap-2">
                    Join The Waitlist <ChevronRight size={16} />
                  </span>
                  <div className="absolute inset-0 bg-[#C5A059] translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-[cubic-bezier(0.19,1,0.22,1)]"></div>
                </button>
              </form>
            ) : (
               <div className="w-full px-8 py-4 border border-[#C5A059]/50 bg-[#C5A059]/10 text-[#C5A059] text-center uppercase tracking-widest text-sm animate-pulse">
                  You are on the list.
               </div>
            )}
            <p className="text-xs text-neutral-500 tracking-wide uppercase">
              Limited early access.
            </p>
        </div>

        {/* TRUST & ETHOS BLOCK (Replaces Secondary Statement) */}
        <div className="mb-24 mt-8 w-full max-w-4xl mx-auto">
          <FadeInSection delay={100}>
            <div className="relative p-10 border-t border-b border-white/5 bg-gradient-to-b from-white/[0.02] to-transparent backdrop-blur-sm text-center">
              
              {/* Gold Accent Connector */}
              <div className="absolute top-0 left-1/2 -translate-x-1/2 w-px h-8 bg-gradient-to-b from-[#C5A059] to-transparent opacity-50"></div>

              <div className="space-y-6 pt-4">
                <h3 className="font-serif text-2xl md:text-4xl text-[#e5e5e5] leading-tight">
                  Built for legacy. <span className="text-[#C5A059] italic">Not for clicks.</span>
                </h3>
                
                <p className="text-sm md:text-base text-neutral-400 font-light tracking-wide">
                  No ads. No feeds. No exploitation. <span className="text-white border-b border-[#C5A059]/30 pb-0.5">Your story stays yours.</span>
                </p>

                <div className="pt-6 w-3/4 mx-auto border-t border-white/5 mt-6">
                   <p className="text-[#C5A059] text-[10px] md:text-xs font-bold tracking-[0.25em] uppercase mb-2">
                     This is only the beginning
                   </p>
                   <p className="text-neutral-500 text-sm font-serif italic opacity-80">
                     Private vaults, living memories, AI-guided legacy experiences.
                   </p>
                </div>

                <div className="pt-2">
                  <button 
                    onClick={scrollToTop} 
                    className="group flex items-center justify-center gap-2 mx-auto text-[10px] uppercase tracking-[0.2em] text-neutral-600 hover:text-[#C5A059] transition-colors"
                  >
                    Request Early Access
                    <span className="block w-4 h-px bg-current group-hover:w-6 transition-all duration-300"></span>
                  </button>
                </div>
              </div>
            </div>
          </FadeInSection>
        </div>

        {/* SEPARATOR */}
        <div className="w-px h-24 bg-gradient-to-b from-transparent via-[#C5A059]/40 to-transparent mb-24"></div>

        {/* FEATURE TILES */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 w-full mb-32">
          
          <FeatureTile 
            id="cultural-layer"
            delay={0}
            icon={<Globe size={24} strokeWidth={1} />}
            title="Cultural Layer"
            description={<>Icons, creators, and history.<br/>Curated. Timeless. Public.</>}
          />

          <FeatureTile 
            id="personal-vault"
            delay={200}
            icon={<Lock size={24} strokeWidth={1} />}
            title="Personal Vault"
            description={<>Your private legacy.<br/>Encrypted. Owned by you.</>}
          />

          <FeatureTile 
            id="intelligent-structure"
            delay={400}
            icon={<Fingerprint size={24} strokeWidth={1} />}
            title="Intelligent Structure"
            description={<>AI that organizes meaning —<br/>not attention.</>}
          />
          
        </div>

        {/* --- SECTION: THE VISION --- */}
        <section className="w-full mb-32">
          <FadeInSection>
            <div className="text-center mb-16">
              <span className="text-[#C5A059] text-xs font-bold tracking-[0.2em] uppercase block mb-4">The Vision</span>
              <h2 className="font-serif text-3xl md:text-5xl lg:text-6xl text-white mb-6 leading-tight">
                More than a database.<br />
                A sanctuary for stories.
              </h2>
              <p className="text-neutral-400 max-w-2xl mx-auto leading-relaxed text-sm md:text-base font-light">
                The open web forgets. It copies, distorts, and dilutes. Remembered is a closed vault
                designed to protect the sanctity of history and the privacy of your personal legacy.
              </p>
            </div>
          </FadeInSection>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <VisionCard 
              delay={100}
              icon={<Zap className="w-6 h-6" />}
              title="Daily Inspiration"
              text="Start every day with a quote, a story or a moment that still matters. From people who changed the world."
            />
            <VisionCard 
              delay={200}
              icon={<Trophy className="w-6 h-6" />}
              title="Hall of Fame"
              text="Your personal collection of the greatest minds, icons and creators of all time. From sports to music, film and culture."
            />
            <VisionCard 
              delay={300}
              icon={<Shield className="w-6 h-6" />}
              title="Pure & Direct"
              text="No subscription traps. No algorithmic noise. You stay in control. You are part of the circle."
            />
          </div>
        </section>

        {/* --- SECTION: OUR PROMISE --- */}
        <section className="w-full mb-24 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          <FadeInSection delay={100}>
            <div className="text-left">
              <span className="text-[#C5A059] text-xs font-bold tracking-[0.2em] uppercase block mb-4">Our Promise</span>
              <h2 className="font-serif text-3xl md:text-5xl text-white mb-8 leading-tight">
                Culture is Free.<br />
                Legacy is Personal.
              </h2>
              
              <div className="space-y-8">
                <div className="flex gap-4 items-start">
                  <div className="mt-1 text-[#3b82f6]">
                    <CheckCircle className="w-5 h-5 fill-[#3b82f6] text-black" />
                  </div>
                  <div>
                    <h4 className="text-white font-bold text-sm tracking-wide uppercase mb-1">Cultural Heritage</h4>
                    <p className="text-neutral-400 text-sm font-light">Legends, history, and public memories remain forever free.</p>
                  </div>
                </div>

                <div className="flex gap-4 items-start">
                  <div className="mt-1 text-[#C5A059]">
                    <div className="bg-[#C5A059] rounded-full p-1 text-black">
                      <Lock className="w-3 h-3" />
                    </div>
                  </div>
                  <div>
                    <h4 className="text-white font-bold text-sm tracking-wide uppercase mb-1">Your Personal Legacy</h4>
                    <p className="text-neutral-400 text-sm font-light">Paid features are strictly for your private vault.</p>
                  </div>
                </div>
              </div>
            </div>
          </FadeInSection>

          <FadeInSection delay={300} className="w-full flex justify-center lg:justify-end">
            <div className="relative w-full max-w-sm aspect-square bg-[#0a0a0a] rounded-3xl border border-white/5 overflow-hidden flex flex-col items-center justify-center group">
              <div className="absolute inset-0 bg-gradient-to-br from-[#1a1a1a] to-black opacity-80"></div>
              {/* Subtle Grid Pattern */}
              <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'radial-gradient(circle, #fff 1px, transparent 1px)', backgroundSize: '24px 24px' }}></div>
              
              {/* Central Shield Icon */}
              <div className="relative z-10 p-6 rounded-2xl bg-gradient-to-b from-white/10 to-transparent border border-white/10 shadow-2xl backdrop-blur-sm group-hover:scale-105 transition-transform duration-700">
                <Shield className="w-16 h-16 text-neutral-400 fill-white/10" strokeWidth={1} />
              </div>
              
              <div className="relative z-10 mt-8 text-[10px] font-medium tracking-[0.3em] text-neutral-500 uppercase">
                Secured by Remembered AI
              </div>
            </div>
          </FadeInSection>
        </section>


        {/* FOOTER */}
        <footer className="w-full border-t border-white/10 pt-12 pb-6 text-center">
           <p className="text-xs text-neutral-600 font-light">
             &copy; 2026 Legacy Global Ventures UG (haftungsbeschränkt)<br/>
             All rights reserved.
           </p>
        </footer>

      </main>
    </div>
  );
};

export default App;
